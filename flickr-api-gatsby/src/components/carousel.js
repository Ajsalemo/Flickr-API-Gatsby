// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- //
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- //

import { Grid } from "@material-ui/core"
import EmblaCarouselReact from "embla-carousel-react"
import Img from "gatsby-image"
import React, { useEffect, useState } from "react"

// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- //
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- //

const EmblaCarouselComponent = ({ data }) => {
  console.log(data)
  const [embla, setEmbla] = useState(null)

  useEffect(() => {
    if (embla) {
      embla.on("select", () => {
        console.log(`Current index is ${embla.selectedScrollSnap()}`)
      })
    }
  }, [embla])

  return (
    <Grid item>
      <EmblaCarouselReact emblaRef={setEmbla} options={{ loop: false }}>
        <Grid item style={{ display: "flex" }}>
          {data.allImageSharp.edges.map(src => (
            <Grid style={{ flex: "0 0 100%" }} key={src.node.id}>
              <Img fluid={src.node.fluid} />
            </Grid>
          ))}
        </Grid>
      </EmblaCarouselReact>
      <button onClick={() => embla.scrollPrev()}>Prev</button>
      <button onClick={() => embla.scrollNext()}>Next</button>
    </Grid>
  )
}

// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- //
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- //

export default EmblaCarouselComponent

// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- //
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- //
